{"version":3,"sources":["../node_modules/@aws-amplify/ui-components/dist/esm-es5 lazy /^/.//.*/.entry/.js$/ include: //.entry/.js$/ exclude: //.system/.entry/.js$/ groupOptions: {} namespace object","lib/WithAuth.tsx","lib/BB2.tsx","aws-config.ts","App.tsx","reportWebVitals.ts","index.tsx"],"names":["map","webpackAsyncContext","req","__webpack_require__","o","Promise","resolve","then","e","Error","code","ids","id","keys","Object","module","exports","logger","Logger","ApiGatewayEndpoint","GetAuthHeader","a","Auth","currentSession","session","idToken","getIdToken","getJwtToken","Authorization","fetch","method","headers","res","json","result","key","encodeURI","awsconfig","identityPoolId","region","userPoolId","userPoolWebClientId","Storage","customPrefix","public","AWSS3","bucket","Amplify","configure","fuse","allFiles","App","props","state","files","setFiles","bind","this","setState","ListFiles","Fuse","threshold","ignoreLocation","useExtendedSearch","console","log","path","File","SearchBar","item","to","React","Component","fileKey","useParams","useState","url","updateUrl","useEffect","GetSignedUrl","presignedUrl","src","controls","autoPlay","type","placeholder","onChange","preventDefault","target","value","length","search","x","withAuth","signedIn","setSignedIn","currentAuthenticatedUser","debug","appendToCognitoUserAgent","setUser","onAuthUIStateChange","authState","AuthState","SignedIn","SignedOut","slot","hideSignUp","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.063b05e2.chunk.js","sourcesContent":["var map = {\n\t\"./amplify-amazon-button_5.entry.js\": [\n\t\t207,\n\t\t16\n\t],\n\t\"./amplify-auth-container.entry.js\": [\n\t\t208,\n\t\t17\n\t],\n\t\"./amplify-auth-fields_9.entry.js\": [\n\t\t209,\n\t\t18\n\t],\n\t\"./amplify-authenticator.entry.js\": [\n\t\t210,\n\t\t5\n\t],\n\t\"./amplify-button_3.entry.js\": [\n\t\t211,\n\t\t19\n\t],\n\t\"./amplify-chatbot.entry.js\": [\n\t\t212,\n\t\t4\n\t],\n\t\"./amplify-checkbox.entry.js\": [\n\t\t213,\n\t\t20\n\t],\n\t\"./amplify-confirm-sign-in_7.entry.js\": [\n\t\t214,\n\t\t6\n\t],\n\t\"./amplify-container.entry.js\": [\n\t\t215,\n\t\t21\n\t],\n\t\"./amplify-federated-buttons_2.entry.js\": [\n\t\t216,\n\t\t22\n\t],\n\t\"./amplify-federated-sign-in.entry.js\": [\n\t\t217,\n\t\t23\n\t],\n\t\"./amplify-form-field_4.entry.js\": [\n\t\t218,\n\t\t24\n\t],\n\t\"./amplify-greetings.entry.js\": [\n\t\t219,\n\t\t25\n\t],\n\t\"./amplify-icon-button.entry.js\": [\n\t\t220,\n\t\t26\n\t],\n\t\"./amplify-icon.entry.js\": [\n\t\t221,\n\t\t7\n\t],\n\t\"./amplify-link.entry.js\": [\n\t\t222,\n\t\t27\n\t],\n\t\"./amplify-nav_2.entry.js\": [\n\t\t223,\n\t\t28\n\t],\n\t\"./amplify-photo-picker.entry.js\": [\n\t\t224,\n\t\t29\n\t],\n\t\"./amplify-picker.entry.js\": [\n\t\t225,\n\t\t30\n\t],\n\t\"./amplify-radio-button_3.entry.js\": [\n\t\t226,\n\t\t8\n\t],\n\t\"./amplify-s3-album.entry.js\": [\n\t\t227,\n\t\t9\n\t],\n\t\"./amplify-s3-image-picker.entry.js\": [\n\t\t228,\n\t\t10\n\t],\n\t\"./amplify-s3-image.entry.js\": [\n\t\t229,\n\t\t11\n\t],\n\t\"./amplify-s3-text-picker.entry.js\": [\n\t\t230,\n\t\t12\n\t],\n\t\"./amplify-s3-text.entry.js\": [\n\t\t231,\n\t\t13\n\t],\n\t\"./amplify-select-mfa-type.entry.js\": [\n\t\t232,\n\t\t31\n\t],\n\t\"./amplify-sign-in-button.entry.js\": [\n\t\t233,\n\t\t14\n\t],\n\t\"./amplify-tooltip.entry.js\": [\n\t\t234,\n\t\t32\n\t]\n};\nfunction webpackAsyncContext(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\treturn Promise.resolve().then(function() {\n\t\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\t\te.code = 'MODULE_NOT_FOUND';\n\t\t\tthrow e;\n\t\t});\n\t}\n\n\tvar ids = map[req], id = ids[0];\n\treturn __webpack_require__.e(ids[1]).then(function() {\n\t\treturn __webpack_require__(id);\n\t});\n}\nwebpackAsyncContext.keys = function webpackAsyncContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackAsyncContext.id = 169;\nmodule.exports = webpackAsyncContext;","import React, {\n    ComponentType,\n    FunctionComponent,\n} from 'react';\nimport { Auth, appendToCognitoUserAgent } from '@aws-amplify/auth';\nimport { AmplifyContainer, AmplifyAuthenticator, AmplifyAuthContainer, AmplifySignIn, AmplifySignOut } from '@aws-amplify/ui-react';\nimport { onAuthUIStateChange, AuthState } from '@aws-amplify/ui-components';\nimport { Logger } from '@aws-amplify/core';\n\nconst logger = new Logger('withAuth');\n\nexport function withAuth<T extends object>(Component: ComponentType<T>) {\n    const AppWithAuthenticator: FunctionComponent<T> = props => {\n        const [signedIn, setSignedIn] = React.useState(false);\n\n        React.useEffect(() => {\n            appendToCognitoUserAgent('withAuth');\n\n            // checkUser returns an \"unsubscribe\" function to stop side-effects\n            return checkUser();\n        });\n\n        function checkUser() {\n            setUser();\n\n            return onAuthUIStateChange(authState => {\n                if (authState === AuthState.SignedIn) {\n                    setSignedIn(true);\n                } else if (authState === AuthState.SignedOut) {\n                    setSignedIn(false);\n                }\n            });\n        }\n\n        async function setUser() {\n            try {\n                const user = await Auth.currentAuthenticatedUser();\n                if (user) setSignedIn(true);\n            } catch (err) {\n                logger.debug(err);\n            }\n        }\n\n        if (!signedIn) {\n            return (\n                <AmplifyContainer>\n                    <AmplifyAuthContainer>\n                        <AmplifyAuthenticator  {...props}>\n                            <AmplifySignIn slot=\"sign-in\" hideSignUp />\n                        </AmplifyAuthenticator>\n                    </AmplifyAuthContainer>\n                </AmplifyContainer>\n            );\n        }\n\n        return (\n            <>\n                <AmplifySignOut />\n                <Component {...props} />\n            </>\n        );\n    };\n\n    return AppWithAuthenticator;\n}","/*\nThis library simplify API calls to AWS API GATEWAY to retrieve file list and presigned uri.\nIt should only be used after user sign in.\n*/\nimport { Auth } from 'aws-amplify';\n\nconst ApiGatewayEndpoint = 'https://6qo3knto43.execute-api.us-west-2.amazonaws.com/prod/';\n\nasync function GetAuthHeader(): Promise<{ Authorization: string }> {\n    let session = await Auth.currentSession();\n    let idToken = session.getIdToken().getJwtToken();\n    return {Authorization:idToken};\n}\n\nasync function ListFiles() {\n    let result = await fetch(`${ApiGatewayEndpoint}`, {method:'GET', headers: await GetAuthHeader()}).then(res => res.json());\n    return result;\n}\n\nasync function GetSignedUrl(key: string) {\n    let result = await fetch(`${ApiGatewayEndpoint}/${encodeURI(key)}`, {method:'GET', headers: await GetAuthHeader()}).then(res => res.json());\n    return result;\n}\n\nexport { ListFiles, GetSignedUrl };","const awsconfig =  {\n    Auth: {\n        identityPoolId: 'us-west-2:6be02c25-8ed1-41c3-be24-91fd359ae1ae', //REQUIRED - Amazon Cognito Identity Pool ID\n        region: 'us-west-2', // REQUIRED - Amazon Cognito Region\n        userPoolId: 'us-west-2_igXUlSWIY', //OPTIONAL - Amazon Cognito User Pool ID\n        userPoolWebClientId: '353nnho6ujdajmsko93qqftgr9', //OPTIONAL - Amazon Cognito Web Client ID\n    },\n    Storage: {\n        customPrefix: {\n            public: '',\n        },\n        AWSS3: {\n            bucket: 'naraku', //REQUIRED -  Amazon S3 bucket name\n            region: 'us-west-2', //OPTIONAL -  Amazon service region\n        }\n    }\n};\n\n\nexport default awsconfig;","import React, {useEffect, useState} from 'react';\nimport './App.css';\nimport Amplify from 'aws-amplify';\nimport Fuse from 'fuse.js';\nimport {\n    BrowserRouter as Router,\n    Switch,\n    Route,\n    Link,\n    useRouteMatch,\n    useParams\n} from \"react-router-dom\";\nimport { withAuth } from './lib/WithAuth';\nimport { ListFiles, GetSignedUrl } from './lib/BB2';\nimport awsconfig from './aws-config';\n\nAmplify.configure(awsconfig);\n\nlet allFiles = [];\nlet fuse;\n\nclass App extends React.Component<any, any> {\n    constructor(props) {\n        super(props);\n        this.state = { files: [], };\n        this.setFiles = this.setFiles.bind(this)\n    }\n\n    setFiles(files) {\n        this.setState({files:files});\n    }\n\n    componentDidMount() {\n      ListFiles().then(files => {\n          allFiles = files;\n          this.setState({files:allFiles});\n          fuse = new Fuse(allFiles, {keys: [], threshold: 0.4, ignoreLocation: true, useExtendedSearch: true})\n          console.log(allFiles);\n      });\n    }\n\n\n\n    render() {\n        return (\n            <Router>\n                <div>\n                    <Switch>\n                        <Route path={`/:fileKey+`}>\n                            <File />\n                        </Route>\n                        <Route path=\"/\">\n                            <SearchBar setFiles={this.setFiles}/>\n                            <ul>\n                                {this.state.files.map(item => (\n                                    <li key={item}>\n                                        <Link to={`/${encodeURI(item)}`}>{item}</Link>\n                                    </li>\n                                ))}\n                            </ul>\n                        </Route>\n                    </Switch>\n                </div>\n            </Router>\n        );\n    }\n}\n\nfunction File() {\n    let { fileKey } = useParams();\n    const [url, updateUrl] = useState();\n    useEffect(() => {\n        GetSignedUrl(fileKey).then(res => updateUrl(res.presignedUrl));\n    });\n    return <>{url &&  <video src={`${url}`} controls={true} autoPlay={true} />}</>;\n}\n\nfunction SearchBar({setFiles}) {\n    const handleChange = (e) => {\n        e.preventDefault();\n        if (e.target.value.length > 0) {\n            setFiles(fuse.search(e.target.value).map(x => x.item));\n        }\n    };\n\n    return <div>\n        <input\n            type=\"search\"\n            placeholder=\"Search here\"\n            onChange={handleChange} />\n    </div>\n}\n\nexport default withAuth(App);\n\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}