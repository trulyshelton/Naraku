(this.webpackJsonpnaraku=this.webpackJsonpnaraku||[]).push([[0],{157:function(e,t,n){},158:function(e,t,n){},163:function(e,t){},192:function(e,t,n){var r={"./amplify-amazon-button_5.entry.js":[230,16],"./amplify-auth-container.entry.js":[231,17],"./amplify-auth-fields_9.entry.js":[232,18],"./amplify-authenticator.entry.js":[233,5],"./amplify-button_3.entry.js":[234,19],"./amplify-chatbot.entry.js":[235,4],"./amplify-checkbox.entry.js":[236,20],"./amplify-confirm-sign-in_7.entry.js":[237,6],"./amplify-container.entry.js":[238,21],"./amplify-federated-buttons_2.entry.js":[239,22],"./amplify-federated-sign-in.entry.js":[240,23],"./amplify-form-field_4.entry.js":[241,24],"./amplify-greetings.entry.js":[242,25],"./amplify-icon-button.entry.js":[243,26],"./amplify-icon.entry.js":[244,7],"./amplify-link.entry.js":[245,27],"./amplify-nav_2.entry.js":[246,28],"./amplify-photo-picker.entry.js":[247,29],"./amplify-picker.entry.js":[248,30],"./amplify-radio-button_3.entry.js":[249,8],"./amplify-s3-album.entry.js":[250,9],"./amplify-s3-image-picker.entry.js":[251,10],"./amplify-s3-image.entry.js":[252,11],"./amplify-s3-text-picker.entry.js":[253,12],"./amplify-s3-text.entry.js":[254,13],"./amplify-select-mfa-type.entry.js":[255,31],"./amplify-sign-in-button.entry.js":[256,14],"./amplify-tooltip.entry.js":[257,32]};function a(e){if(!n.o(r,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=r[e],a=t[0];return n.e(t[1]).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id=192,e.exports=a},227:function(e,t,n){"use strict";n.r(t);var r=n(8),a=n.n(r),i=n(127),s=n.n(i),c=(n(157),n(91)),o=n(21),u=n(22),l=n(85),f=n(38),p=n(36),j=(n(158),n(101)),h=n(128),y=n(71),b=n(15),d=n(32),m=n.n(d),v=n(35),x=n(49),O=n(19),g=n(63),k=n(289),w=n(94),S=n(46),I=n(12),F=new S.a("withAuth");var P=n(37),_=n(287),E=n(139),A=n(89),C=n(92);function T(e){var t,n,r,a=2;for("undefined"!==typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);a--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new U(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function U(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then((function(e){return{value:e,done:t}}))}return U=function(e){this.s=e,this.n=e.next},U.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new U(e)}var N,D="https://6qo3knto43.execute-api.us-west-2.amazonaws.com/prod/";function J(){return L.apply(this,arguments)}function L(){return(L=Object(x.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.a.currentSession();case 2:return t=e.sent,n=t.getIdToken().getJwtToken(),e.abrupt("return",{Authorization:n});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(x.a)(m.a.mark((function e(t){var n,r,a,i,s,c,o,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=!1,a=!1,e.prev=3,s=T(Object(_.a)({client:N},{Bucket:"naraku",Prefix:t}));case 5:return e.next=7,s.next();case 7:if(!(r=!(c=e.sent).done)){e.next=13;break}u=c.value,n.push.apply(n,Object(P.a)(null!==(o=u.Contents.map((function(e){return e.Key})))&&void 0!==o?o:[]));case 10:r=!1,e.next=5;break;case 13:e.next=19;break;case 15:e.prev=15,e.t0=e.catch(3),a=!0,i=e.t0;case 19:if(e.prev=19,e.prev=20,!r||null==s.return){e.next=24;break}return e.next=24,s.return();case 24:if(e.prev=24,!a){e.next=27;break}throw i;case 27:return e.finish(24);case 28:return e.finish(19);case 29:return e.abrupt("return",n);case 30:case"end":return e.stop()}}),e,null,[[3,15,19,29],[20,,24,28]])})))).apply(this,arguments)}function B(){return(B=Object(x.a)(m.a.mark((function e(t){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new E.a({Bucket:"naraku",Key:t}),e.next=3,Object(C.b)(N,n,{expiresIn:7200});case 3:return r=e.sent,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=Object(x.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=fetch,e.t1="".concat(D,"/config"),e.next=4,J();case 4:return e.t2=e.sent,e.t3={method:"GET",headers:e.t2},e.next=8,(0,e.t0)(e.t1,e.t3).then((function(e){return e.json()}));case 8:t=e.sent,N=new A.a(t);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q={Auth:{identityPoolId:"us-west-2:6be02c25-8ed1-41c3-be24-91fd359ae1ae",region:"us-west-2",userPoolId:"us-west-2_igXUlSWIY",userPoolWebClientId:"353nnho6ujdajmsko93qqftgr9"},Storage:{customPrefix:{public:""},AWSS3:{bucket:"naraku",region:"us-west-2"}}};j.default.configure(q);var z,M=JSON.parse(localStorage.getItem("allFiles")||"[]"),R=function(e){Object(f.a)(n,e);var t=Object(p.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).state={files:M},r.setFiles=r.setFiles.bind(Object(l.a)(r)),r}return Object(u.a)(n,[{key:"setFiles",value:function(e){this.setState({files:e})}},{key:"componentDidMount",value:function(){var e=this;(function(){return K.apply(this,arguments)})().then((function(){(function(e){return W.apply(this,arguments)})("").then((function(t){M=t,localStorage.setItem("allFiles",JSON.stringify(M)),e.setFiles(M),z=new h.a(M,{keys:[],threshold:.4,ignoreLocation:!0,useExtendedSearch:!0}),console.log("Load all files complete.")}))}))}},{key:"render",value:function(){return Object(I.jsx)(y.a,{children:Object(I.jsx)("div",{children:Object(I.jsxs)(b.c,{children:[Object(I.jsx)(b.a,{path:"/:fileKey+/view",children:Object(I.jsx)(X,{})}),Object(I.jsxs)(b.a,{path:"/:path*",children:[Object(I.jsx)(Y,{setFiles:this.setFiles}),Object(I.jsx)(G,{state:this.state})]})]})})})}}]),n}(a.a.Component);function G(e){var t=e.state,n=Object(b.f)().path;console.log("Exploring path ".concat(n,"."));var r=void 0===n?"":"/";n=n||"";for(var a=new Set,i=[],s=0;s<t.files.length;s++){var c=t.files[s];if(c.startsWith(n)){var o=(c=(c=c.substring(n.length)).startsWith("/")?c.substring(1):c).split("/");o.length>1?a.add(o[0]):i.push(c)}}return Object(I.jsxs)("ul",{children:[n&&Object(I.jsx)("li",{children:Object(I.jsx)(y.b,{to:"../",children:"../"})},".."),Array.from(a).map((function(e){return Object(I.jsx)("li",{children:Object(I.jsxs)(y.b,{to:"".concat(r+encodeURI(n+"/"+e),"/"),children:[e,"/"]})},e)})),i.map((function(e){return Object(I.jsx)("li",{children:Object(I.jsx)(y.b,{to:"".concat(r+encodeURI(n+"/"+e),"/view"),children:e})},e)}))]})}function X(){var e=Object(b.f)().fileKey,t=Object(r.useState)(""),n=Object(c.a)(t,2),a=n[0],i=n[1];return Object(r.useEffect)((function(){(function(e){return B.apply(this,arguments)})(e).then((function(e){return i(e)}))})),Object(I.jsxs)("div",{children:[Object(I.jsx)("p",{style:{textAlign:"center"},children:e.split("/").pop()}),a&&Object(I.jsx)("video",{className:"center",src:"".concat(a),controls:!0,autoPlay:!0})]})}function Y(e){var t=e.setFiles;return Object(I.jsx)("div",{children:Object(I.jsx)("textarea",{className:"center",placeholder:"Search here",onChange:function(e){e.preventDefault(),e.target.value.length>0?t(z.search(e.target.value).map((function(e){return e.item}))):t(M)}})})}var H,Q=(H=R,function(e){var t=a.a.useState(!1),n=Object(c.a)(t,2),r=n[0],i=n[1];function s(){return(s=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.a.currentAuthenticatedUser();case 3:e.sent&&i(!0),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),F.debug(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}return a.a.useEffect((function(){return Object(O.j)("withAuth"),function(){s.apply(this,arguments)}(),Object(w.b)((function(e){e===w.a.SignedIn?i(!0):e===w.a.SignedOut&&i(!1)}))})),r?Object(I.jsx)(H,Object(v.a)({},e)):Object(I.jsx)(k.c,{children:Object(I.jsx)(k.a,{children:Object(I.jsx)(k.b,Object(v.a)(Object(v.a)({},e),{},{children:Object(I.jsx)(k.d,{slot:"sign-in",hideSignUp:!0})}))})})}),V=function(e){e&&e instanceof Function&&n.e(35).then(n.bind(null,302)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,i=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),i(e),s(e)}))};s.a.render(Object(I.jsx)(a.a.StrictMode,{children:Object(I.jsx)(Q,{})}),document.getElementById("root")),V()}},[[227,2,3]]]);
//# sourceMappingURL=main.2a654ced.chunk.js.map