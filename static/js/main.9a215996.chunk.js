(this.webpackJsonpnaraku=this.webpackJsonpnaraku||[]).push([[0],{134:function(t,e,n){},135:function(t,e,n){},140:function(t,e){},169:function(t,e,n){var r={"./amplify-amazon-button_5.entry.js":[207,16],"./amplify-auth-container.entry.js":[208,17],"./amplify-auth-fields_9.entry.js":[209,18],"./amplify-authenticator.entry.js":[210,5],"./amplify-button_3.entry.js":[211,19],"./amplify-chatbot.entry.js":[212,4],"./amplify-checkbox.entry.js":[213,20],"./amplify-confirm-sign-in_7.entry.js":[214,6],"./amplify-container.entry.js":[215,21],"./amplify-federated-buttons_2.entry.js":[216,22],"./amplify-federated-sign-in.entry.js":[217,23],"./amplify-form-field_4.entry.js":[218,24],"./amplify-greetings.entry.js":[219,25],"./amplify-icon-button.entry.js":[220,26],"./amplify-icon.entry.js":[221,7],"./amplify-link.entry.js":[222,27],"./amplify-nav_2.entry.js":[223,28],"./amplify-photo-picker.entry.js":[224,29],"./amplify-picker.entry.js":[225,30],"./amplify-radio-button_3.entry.js":[226,8],"./amplify-s3-album.entry.js":[227,9],"./amplify-s3-image-picker.entry.js":[228,10],"./amplify-s3-image.entry.js":[229,11],"./amplify-s3-text-picker.entry.js":[230,12],"./amplify-s3-text.entry.js":[231,13],"./amplify-select-mfa-type.entry.js":[232,31],"./amplify-sign-in-button.entry.js":[233,14],"./amplify-tooltip.entry.js":[234,32]};function a(t){if(!n.o(r,t))return Promise.resolve().then((function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}));var e=r[t],a=e[0];return n.e(e[1]).then((function(){return n(a)}))}a.keys=function(){return Object.keys(r)},a.id=169,t.exports=a},204:function(t,e,n){"use strict";n.r(e);var r=n(3),a=n.n(r),s=n(113),c=n.n(s),i=(n(134),n(77)),o=n(17),u=n(18),l=n(75),f=n(30),j=n(29),p=(n(135),n(87)),h=n(124),y=n(62),b=n(11),d=n(34),m=n.n(d),O=n(28),x=n(48),g=n(15),v=n(55),k=n(265),w=n(79),S=n(38),F=n(7),I=new S.a("withAuth");var _="https://6qo3knto43.execute-api.us-west-2.amazonaws.com/prod/";function E(){return U.apply(this,arguments)}function U(){return(U=Object(x.a)(m.a.mark((function t(){var e,n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.a.currentSession();case 2:return e=t.sent,n=e.getIdToken().getJwtToken(),t.abrupt("return",{Authorization:n});case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function A(){return(A=Object(x.a)(m.a.mark((function t(){var e;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=fetch,t.t1="".concat(_),t.next=4,E();case 4:return t.t2=t.sent,t.t3={method:"GET",headers:t.t2},t.next=8,(0,t.t0)(t.t1,t.t3).then((function(t){return t.json()}));case 8:return e=t.sent,t.abrupt("return",e);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function P(){return(P=Object(x.a)(m.a.mark((function t(e){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=fetch,t.t1="".concat(_,"/").concat(encodeURI(e)),t.next=4,E();case 4:return t.t2=t.sent,t.t3={method:"GET",headers:t.t2},t.next=8,(0,t.t0)(t.t1,t.t3).then((function(t){return t.json()}));case 8:return n=t.sent,t.abrupt("return",n);case 10:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var C={Auth:{identityPoolId:"us-west-2:6be02c25-8ed1-41c3-be24-91fd359ae1ae",region:"us-west-2",userPoolId:"us-west-2_igXUlSWIY",userPoolWebClientId:"353nnho6ujdajmsko93qqftgr9"},Storage:{customPrefix:{public:""},AWSS3:{bucket:"naraku",region:"us-west-2"}}};p.default.configure(C);var T,N=JSON.parse(localStorage.getItem("allFiles")||"[]"),D=function(t){Object(f.a)(n,t);var e=Object(j.a)(n);function n(t){var r;return Object(o.a)(this,n),(r=e.call(this,t)).state={files:N},r.setFiles=r.setFiles.bind(Object(l.a)(r)),r}return Object(u.a)(n,[{key:"setFiles",value:function(t){this.setState({files:t})}},{key:"componentDidMount",value:function(){var t=this;(function(){return A.apply(this,arguments)})().then((function(e){N=e,localStorage.setItem("allFiles",JSON.stringify(N)),t.setFiles(N),T=new h.a(N,{keys:[],threshold:.4,ignoreLocation:!0,useExtendedSearch:!0}),console.log("Load all files complete.")}))}},{key:"render",value:function(){return Object(F.jsx)(y.a,{children:Object(F.jsx)("div",{children:Object(F.jsxs)(b.c,{children:[Object(F.jsx)(b.a,{path:"/:fileKey+/view",children:Object(F.jsx)(L,{})}),Object(F.jsxs)(b.a,{path:"/:path*",children:[Object(F.jsx)(W,{setFiles:this.setFiles}),Object(F.jsx)(J,{state:this.state})]})]})})})}}]),n}(a.a.Component);function J(t){var e=t.state,n=Object(b.f)().path;console.log("Exploring path ".concat(n,"."));var r=void 0===n?"":"/";n=n||"";for(var a=new Set,s=[],c=0;c<e.files.length;c++){var i=e.files[c];if(i.startsWith(n)){var o=(i=(i=i.substring(n.length)).startsWith("/")?i.substring(1):i).split("/");o.length>1?a.add(o[0]):s.push(i)}}return Object(F.jsxs)("ul",{children:[n&&Object(F.jsx)("li",{children:Object(F.jsx)(y.b,{to:"../",children:"../"})},".."),Array.from(a).map((function(t){return Object(F.jsx)("li",{children:Object(F.jsxs)(y.b,{to:"".concat(r+encodeURI(n+"/"+t),"/"),children:[t,"/"]})},t)})),s.map((function(t){return Object(F.jsx)("li",{children:Object(F.jsx)(y.b,{to:"".concat(r+encodeURI(n+"/"+t),"/view"),children:t})},t)}))]})}function L(){var t=Object(b.f)().fileKey,e=Object(r.useState)(),n=Object(i.a)(e,2),a=n[0],s=n[1];return Object(r.useEffect)((function(){(function(t){return P.apply(this,arguments)})(t).then((function(t){return s(t.presignedUrl)}))})),Object(F.jsxs)("div",{children:[Object(F.jsx)("p",{style:{textAlign:"center"},children:t.split("/").pop()}),a&&Object(F.jsx)("video",{className:"center",src:"".concat(a),controls:!0,autoPlay:!0})]})}function W(t){var e=t.setFiles;return Object(F.jsx)("div",{children:Object(F.jsx)("textarea",{className:"center",placeholder:"Search here",onChange:function(t){t.preventDefault(),t.target.value.length>0?e(T.search(t.target.value).map((function(t){return t.item}))):e(N)}})})}var q,z=(q=D,function(t){var e=a.a.useState(!1),n=Object(i.a)(e,2),r=n[0],s=n[1];function c(){return(c=Object(x.a)(m.a.mark((function t(){return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,v.a.currentAuthenticatedUser();case 3:t.sent&&s(!0),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),I.debug(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}return a.a.useEffect((function(){return Object(g.j)("withAuth"),function(){c.apply(this,arguments)}(),Object(w.b)((function(t){t===w.a.SignedIn?s(!0):t===w.a.SignedOut&&s(!1)}))})),r?Object(F.jsx)(q,Object(O.a)({},t)):Object(F.jsx)(k.c,{children:Object(F.jsx)(k.a,{children:Object(F.jsx)(k.b,Object(O.a)(Object(O.a)({},t),{},{children:Object(F.jsx)(k.d,{slot:"sign-in",hideSignUp:!0})}))})})}),M=function(t){t&&t instanceof Function&&n.e(35).then(n.bind(null,278)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,s=e.getLCP,c=e.getTTFB;n(t),r(t),a(t),s(t),c(t)}))};c.a.render(Object(F.jsx)(a.a.StrictMode,{children:Object(F.jsx)(z,{})}),document.getElementById("root")),M()}},[[204,2,3]]]);
//# sourceMappingURL=main.9a215996.chunk.js.map